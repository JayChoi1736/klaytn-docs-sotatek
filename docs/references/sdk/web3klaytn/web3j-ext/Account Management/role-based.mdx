# Role-based Account Key

**AccountKeyRoleBased** represents a role-based key. If an account has an **AccountKeyRoleBased** object and the transaction type is one **except account update**, the validation process is done according to each roles like below:

<CH.Spotlight>
<CH.Code>

```java RecoverMessageWithRoleBasedExample.java
package org.web3j.example;

import java.io.IOException;
import org.web3j.crypto.KlayCredentials;
import org.web3j.crypto.KlaySignatureData;
import org.web3j.crypto.Sign.SignatureData;
import org.web3j.protocol.http.HttpService;
import org.web3j.protocol.klaytn.Web3j;
import org.web3j.protocol.klaytn.core.method.response.KlayRecoverFromMessageResponse;

/**
 * 
 */
public class RecoverMessageWithRoleBasedExample implements keySample {
    /**
     * 
     */

    public static void run() throws IOException {
        Web3j web3j = Web3j.build(new HttpService(keySample.BAOBAB_URL));
        KlayCredentials credentials1 = KlayCredentials.create(keySample.ROLEBASED_KEY_transactionkey,
                keySample.ROLEBASED_KEY_address);
        KlayCredentials credentials2 = KlayCredentials.create(keySample.ROLEBASED_KEY_updatekey,
                keySample.ROLEBASED_KEY_address);
        KlayCredentials credentials3 = KlayCredentials.create(keySample.ROLEBASED_KEY_feepayer,
                keySample.ROLEBASED_KEY_address);
        String from = credentials1.getAddress();
        String message = "0xdeadbeef";
        String blockNumber = "latest";

        SignatureData signature1 = KlaySignatureData.signPrefixedMessage(message, credentials1);
        String result1 = KlaySignatureData.getSignatureString(signature1);

        SignatureData signature2 = KlaySignatureData.signPrefixedMessage(message, credentials2);
        String result2 = KlaySignatureData.getSignatureString(signature2);

        SignatureData signature3 = KlaySignatureData.signPrefixedMessage(message, credentials3);
        String result3 = KlaySignatureData.getSignatureString(signature3);

        KlayRecoverFromMessageResponse response1 = web3j.klayRecoverFromMessage(from, message, result1, blockNumber)
                .send();

        KlayRecoverFromMessageResponse response2 = web3j.klayRecoverFromMessage(from, message, result2, blockNumber)
                .send();

        KlayRecoverFromMessageResponse response3 = web3j.klayRecoverFromMessage(from, message, result3, blockNumber)
                .send();
        System.out.println("Original address : " + from);
        System.out.println("Result address for transaction key : " + response1.getResult());
        System.out.println("Result address for update key : " + response2.getResult());
        System.out.println("Result address for feepayer key : " + response3.getResult());

        web3j.shutdown();

    }

}
```
---
```zsh output
‚ùØ java RecoverMessageWithRoleBasedExample.java
output
```
</CH.Code>

---
Import necessary utils from web3j
```java RecoverMessageWithRoleBasedExample.java focus=1:9

```
---
Create a Web3j instance with the Baobab testnet endpoint
```java RecoverMessageWithRoleBasedExample.java focus=20

```
---
Create 3 different KlayCredentials instances with role-based keys
```java RecoverMessageWithRoleBasedExample.java focus=21:26

```
---
Set common parameters
```java RecoverMessageWithRoleBasedExample.java focus=27:29

```
---
Sign the message with different keys and get the result strings
```java RecoverMessageWithRoleBasedExample.java focus=31:38

```
---
Perform address recovery for each role and print the results
```java RecoverMessageWithRoleBasedExample.java focus=40:46

```
---
Print the results
```java RecoverMessageWithRoleBasedExample.java focus=48:51

```
---
Shutdown the Web3j instance
```java RecoverMessageWithRoleBasedExample.java focus=53

```



</CH.Spotlight>
