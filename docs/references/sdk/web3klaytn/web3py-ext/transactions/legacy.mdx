TxTypeLegacyTransaction represents a type of transactions existed previously in Klaytn.

\*\*This type of transaction can create an account, transfer tokens, deploy a smart contract, execute a smart contract, or perform a mix of aforementioned.

<CH.Spotlight>

<CH.Code>

```python txTypeLegacyTransaction.py
from web3py_ext import extend
from web3 import Web3
from eth_account import Account
from web3py_ext.transaction.transaction import (
    empty_tx,
    fill_transaction,
    TX_TYPE_LEGACY_TRANSACTION
)
from web3py_ext.utils.klaytn_utils import to_pretty
from cytoolz import merge

w3 = Web3(Web3.HTTPProvider('https://public-en-baobab.klaytn.net'))
def web3_legacy_value_transfer_sign_recover():
    user = Account.from_key('0x0e4ca6d38096ad99324de0dde108587e5d7c600165ae4cd6c2462c597458c2b8')
    value_transfer_tx = {
        'from' : user.address,
        'to' : user.address, # to self
        'value' : Web3.to_peb(10, "klay"),
    }
    value_transfer_tx = fill_transaction(value_transfer_tx, w3)
    signed_tx = Account.sign_transaction(value_transfer_tx, user.key)
    print("\nraw transaction of signed tx:", signed_tx.rawTransaction.hex())
    recovered_tx = Account.recover_transaction(signed_tx.rawTransaction)
    print("\nrecovered sender address", recovered_tx)
    decoded_tx = Account.decode_transaction(signed_tx.rawTransaction)
    print("\ndecoded transaction:", to_pretty(decoded_tx))
    tx_hash = w3.eth.send_raw_transaction(signed_tx.rawTransaction)
    tx_receipt = w3.eth.wait_for_transaction_receipt(tx_hash)
    print('tx hash: ', tx_hash, 'receipt: ', tx_receipt)
web3_legacy_value_transfer_sign_recover()
```

---

```zsh output
❯ python txTypeLegacyTransaction.py
0xa02e0i90faef4323cb542312de9aac0
```

</CH.Code>

---

Import the `web3py_ext` and needed packages that can interact with the blockchain and its ecosystem. (Add) web3py-ext supports some utils

```python txTypeLegacyTransaction.py focus=1:10

```

---

Setup the web3 provider with baobab public RPC URL
```python txTypeLegacyTransaction.py focus=12

```
---

The **from_key** method create account instance.

```python txTypeLegacyTransaction.py focus=14

```
---
Define transaction data with only **from**, **to**, **value** fields
``` python txTypeLegacyTransaction.py focus=15:19
```
---
The **fill_transaction** method will auto-complete some fields like nonce, gas, …

```python txTypeLegacyTransaction.py focus=20

```
---
The **sign_transaction** method sign transaction by account instance.

```python txTypeLegacyTransaction.py focus=21:22

```
---
The **recover_transaction** method get recovered tx and return the address. which signed the tx.

```python txTypeLegacyTransaction.py focus=23:24

```
---
The **decode_transaction** method decode tx from rawTransaction.

```python txTypeLegacyTransaction.py focus=25:26

```
---
The **send_raw_transaction** method send the tx to the blockchain.

```python txTypeLegacyTransaction.py focus=27

```
---

The **wait_for_transaction_receipt** method returns the receipt of transaction if it is arrived.
(Add) If you want to get the pretty output format, use the 'to_pretty' util

```python txTypeLegacyTransaction.py focus=28

```
---

Finally, get the result.
<CH.Code>
```python txTypeLegacyTransaction.py focus=29

```
---
```zsh output
❯ node txTypeLegacyTransaction.py
0xa02e0i90faef4323cb542312de9aac0
```

</CH.Code>

</CH.Spotlight>
